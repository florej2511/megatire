import{s as c,_ as $}from"./Header.vue_vue_type_script_setup_true_lang-a50dfd78.js";import{I as j,_ as w}from"./Button.vue_vue_type_script_setup_true_lang-a65fa9bc.js";import"./axios-4e48d306.js";import{V as x}from"./UserCreation.vue_vue_type_script_setup_true_lang-c1474c2b.js";import{_ as B}from"./VehicleCreation.vue_vue_type_script_setup_true_lang-6fb52327.js";import{d as F,b as i,o as I,j as N,k as S,l as m,i as d,e,f as p,c as h,m as T,F as A,t as o,n as b,h as W,p as D}from"./index-9c9b437d.js";const E={class:"flex w-full flex-wrap"},G={class:"w-full flex pt-5 flex-wrap"},O={class:"tablet:flex-1 phone:w-full tablet:pr-4 py-2"},U={class:"tablet:w-fit phone:w-full flex justify-end py-2"},z={class:"w-full h-auto pt-5"},H=["onClick"],L={class:"tablet:w-1/6 phone:w-1/3 flex flex-col px-2 border-x text-center overflow-hidden"},M={class:"tablet:w-3/6 phone:w-2/3 flex flex-col px-2 border-x text-center overflow-hidden"},R={class:"tablet:w-3/6 phone:w-0 flex tablet:px-3 overflow-hidden"},q={key:0},J={class:"flex flex-wrap items-center"},K=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Dueño: ",-1),P={class:"tablet:w-2/3 phone:w-full text-sm italic"},Q={class:"flex flex-wrap items-center"},X=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Correo: ",-1),Y={class:"tablet:w-2/3 phone:w-full text-sm italic cursor-pointer"},Z={class:"flex flex-wrap items-center"},ee=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Identificación: ",-1),te={class:"tablet:w-2/3 phone:w-full text-sm italic cursor-pointer"},le={class:"flex flex-wrap items-center"},se=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Teléfono: ",-1),ae={class:"tablet:w-2/3 phone:w-full text-sm italic cursor-pointer"},oe={class:"flex flex-wrap items-center"},ne=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Vehículo: ",-1),ce={class:"tablet:w-2/3 phone:w-full text-sm italic"},ie=e("div",{class:"py-3 text-center border-y mt-2"},[e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Servicios: ")],-1),re=e("div",{class:"py-4"},o(""),-1),ue={key:1},de={class:"flex flex-wrap items-center"},pe={class:"w-full flex justify-end"},ye=F({__name:"VehiclesView",setup(he){const f=i(""),r=i([]),n=i({}),u=i(),l=i({}),_=i(!1),v=async()=>{u.value&&u.value.abort(),u.value=new AbortController;const a=await new x().listVehicles({plate:`%%${f.value}`},u.value.signal);u.value=void 0,r.value=a.data};I(()=>{c("title","Vehiculos"),v()});const y=s=>{n.value=s,c("helperWindow","ok"),c("helperTitle",s.plate)},V=async()=>{_.value=!1,await D(),_.value=!0,n.value={},l.value={},c("helperWindow","ok"),c("helperTitle","Añadir nuevo vehículo")},g=N(()=>l.value.plate&&l.value.tipo&&l.value.cc_nit&&l.value.fullname&&l.value.email&&l.value.cellphone),k=async()=>{const s=await new x().saveVehicle(l.value);if(s.status==200){let a=!1;r.value=r.value.map(t=>t.id==s.data.id?(a=!0,s.data):t),a||r.value.unshift(s.data),c("helperWindow")}};return(s,a)=>(d(),S($,null,{main:m(()=>[e("div",E,[e("div",G,[e("div",O,[p(j,{modelValue:f.value,"onUpdate:modelValue":[a[0]||(a[0]=t=>f.value=t),v],label:"Filtrar vehículos",placeholder:"Filtrar vehículos por placa"},null,8,["modelValue"])]),e("div",U,[p(w,{content:"Añadir/Editar",color:"primary","exact-color":"",class:"tablet:w-40 phone:w-full",onClick:V})])]),e("div",z,[(d(!0),h(A,null,T(r.value,(t,C)=>(d(),h("div",{class:"py-1",key:C},[e("div",{class:b(["w-full h-10 border overflow-hidden flex items-center px-2 rounded-lg cursor-pointer hover:bg-gray-200 hover:bg-opacity-50 duration-200 whitespace-nowrap",[t.reviewed_by?"":"border-primary"]]),onClick:fe=>y(t)},[e("div",L,o(t.plate),1),e("div",M,o(t.fullname),1),e("div",R,o(t.cc_nit),1)],10,H)]))),128))])])]),helper:m(()=>[Object.keys(n.value).length?(d(),h("div",q,[e("div",J,[K,e("span",P,o(n.value.fullname),1)]),e("div",Q,[X,e("span",Y,o(n.value.email),1)]),e("div",Z,[ee,e("span",te,o(n.value.cc_nit),1)]),e("div",le,[se,e("span",ae,o(n.value.cellphone),1)]),e("div",oe,[ne,e("span",ce,o(n.value.tipo),1)]),ie,re])):_.value?(d(),h("div",ue,[e("div",de,[e("div",pe,[p(w,{content:"Guardar",class:b(["w-28",[g.value?"":"invisible"]]),color:"primary","exact-color":"",onClick:k},null,8,["class"])]),p(B,{"current-register":l.value,"onUpdate:currentRegister":a[1]||(a[1]=t=>l.value=t)},null,8,["current-register"])])])):W("",!0)]),_:1}))}});export{ye as default};
