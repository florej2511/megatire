import{I as n}from"./Button.vue_vue_type_script_setup_true_lang-a65fa9bc.js";import{a as w,d as _,b as i,o as g,q as C,i as U,c as V,e as c,f as u,h as b}from"./index-9c9b437d.js";import{a as r}from"./axios-4e48d306.js";class y{constructor(){const e=w();r.defaults.headers.Authorization=`Bearer ${e.api_token}`}async listVehicles(e,l){return await r.get("vehicles",{params:e,signal:l})}async listClients(e,l){return await r.get("clients",{params:e,signal:l})}async saveVehicle(e){return await r.post("vehicles",e)}async saveService(e){return await r.post("services",e)}async saveClient(e){return await r.post("clients",e)}async listServices(e,l){return await r.get("services",{params:e,signal:l})}}const k={class:"flex flex-wrap items-center w-full"},N={class:"pt-6 w-full"},B={key:0,class:"w-full"},D={class:"pt-6 w-full"},I={class:"pt-6 w-full"},S={class:"pt-6 w-full"},z=_({__name:"UserCreation",props:{currentUser:{}},emits:["update:currentUser"],setup(d,{emit:e}){const l=d,m=i(!1),p=i(!1),o=i(),v=i(void 0),f=async()=>{var t;console.log("listing"),o.value&&o.value.abort(),o.value=new AbortController;const s=await new y().listClients({cc_nit:l.currentUser.cc_nit},(t=o.value)==null?void 0:t.signal);o.value=void 0,p.value=!0,s.data.length==1?(m.value=!0,e("update:currentUser",{...l.currentUser,...s.data[0]})):m.value=!1},h=async()=>{clearTimeout(v.value),v.value=setTimeout(()=>{f()},1e3)};return g(()=>{console.log(l.currentUser.cc_nit),l.currentUser.cc_nit&&f()}),C(()=>l.currentUser.cc_nit,()=>{h()}),(s,t)=>(U(),V("div",k,[c("div",N,[u(n,{modelValue:l.currentUser.cc_nit,"onUpdate:modelValue":t[0]||(t[0]=a=>l.currentUser.cc_nit=a),placeholder:"Digite el NIT o la Cédula",label:"Identificación"},null,8,["modelValue"])]),p.value?(U(),V("div",B,[c("div",D,[u(n,{modelValue:s.currentUser.fullname,"onUpdate:modelValue":t[1]||(t[1]=a=>s.currentUser.fullname=a),placeholder:"Digite el nombre completo",label:"Nombre"},null,8,["modelValue"])]),c("div",I,[u(n,{modelValue:s.currentUser.email,"onUpdate:modelValue":t[2]||(t[2]=a=>s.currentUser.email=a),placeholder:"Digite el correo eletrónico",label:"Correo eletrónico"},null,8,["modelValue"])]),c("div",S,[u(n,{modelValue:s.currentUser.cellphone,"onUpdate:modelValue":t[3]||(t[3]=a=>s.currentUser.cellphone=a),placeholder:"Digite el celular o teléfono",label:"Celular"},null,8,["modelValue"])])])):b("",!0)]))}});export{y as V,z as _};
