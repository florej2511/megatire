import{s as o,_ as T}from"./Header.vue_vue_type_script_setup_true_lang-a50dfd78.js";import{I as h,_ as m}from"./Button.vue_vue_type_script_setup_true_lang-a65fa9bc.js";import{c as x}from"./axios-4e48d306.js";import{V as b}from"./UserCreation.vue_vue_type_script_setup_true_lang-c1474c2b.js";import{_ as $}from"./VehicleCreation.vue_vue_type_script_setup_true_lang-6fb52327.js";import{d as B,b as i,o as I,j as N,k as U,l as y,i as u,e,f as n,c as p,m as z,F as A,t as c,g,n as k,h as D,p as W}from"./index-9c9b437d.js";const G={class:"flex w-full flex-wrap"},H={class:"w-full flex pt-5 flex-wrap"},O={class:"tablet:flex-1 phone:w-full tablet:pr-4 py-2"},P={class:"tablet:w-fit phone:w-full flex justify-end py-2"},R={class:"w-full h-auto pt-5"},E=["onClick"],L={class:"tablet:w-1/6 phone:w-1/3 flex flex-col px-2 border-x text-center overflow-hidden"},M={class:"tablet:w-1/6 phone:w-0 flex tablet:px-3 overflow-hidden"},q={class:"tablet:w-4/6 phone:w-2/3 flex flex-col px-2 border-x text-center overflow-hidden"},J={key:0},K={class:"flex flex-wrap items-center"},Q=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Vehículo: ",-1),X={class:"tablet:w-2/3 phone:w-full text-sm italic cursor-pointer"},Y={class:"flex flex-wrap items-center"},Z=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Precio: ",-1),ee={class:"tablet:w-2/3 phone:w-full text-sm italic"},le=e("div",{class:"py-3 text-center border-y mt-2"},[e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Descripción: ")],-1),te={class:"py-4"},ae={key:1},se={class:"flex flex-wrap items-center"},oe={class:"w-full flex justify-end py-6"},re={class:"w-full"},ie={class:"w-full pt-6"},he=B({__name:"HomeView",setup(ne){const v=i(""),d=i(),f=i([]),_=i(!1),r=i({}),l=i({}),w=async()=>{d.value&&d.value.abort(),d.value=new AbortController;const a=await new b().listServices({"v.plate":`%%${v.value}`},d.value.signal);d.value=void 0,f.value=a.data},V=async()=>{const a=await new b().saveService(l.value);a.status==200&&f.value.unshift(a.data),o("helperWindow")},S=async()=>{_.value=!1,await W(),_.value=!0,r.value={},l.value={},o("helperWindow","ok"),o("helperTitle","Añadir nuevo servicio")},C=a=>{r.value=a,o("helperWindow","ok"),o("helperTitle",a.plate)};I(()=>{o("title","Servicios"),o("helperTitle","Agregar nuevo servicio"),w()});const j=N(()=>l.value.plate&&l.value.tipo&&l.value.cc_nit&&l.value.fullname&&l.value.email&&l.value.cellphone&&l.value.description);return(a,s)=>(u(),U(T,null,{main:y(()=>[e("div",G,[e("div",H,[e("div",O,[n(h,{modelValue:v.value,"onUpdate:modelValue":[s[0]||(s[0]=t=>v.value=t),w],label:"Filtrar servicios",placeholder:"Filtrar servicios por placa"},null,8,["modelValue"])]),e("div",P,[n(m,{content:"Registrar",color:"primary","exact-color":"",class:"tablet:w-40 phone:w-full",onClick:S})])]),e("div",R,[(u(!0),p(A,null,z(f.value,(t,F)=>(u(),p("div",{class:"py-1",key:F},[e("div",{class:k(["w-full h-10 border overflow-hidden flex items-center px-2 rounded-lg cursor-pointer hover:bg-gray-200 hover:bg-opacity-50 duration-200 whitespace-nowrap",[t.reviewed_by?"":"border-primary"]]),onClick:ce=>C(t)},[e("div",L,c(t.plate),1),e("div",M,c(g(x)(t.price)),1),e("div",q,c(t.description),1)],10,E)]))),128))])])]),helper:y(()=>[Object.keys(r.value).length?(u(),p("div",J,[e("div",K,[Q,e("span",X,c(r.value.tipo),1)]),e("div",Y,[Z,e("span",ee,c(g(x)(r.value.price)),1)]),le,e("div",te,c(r.value.description),1)])):_.value?(u(),p("div",ae,[e("div",se,[e("div",oe,[n(m,{content:"Guardar",class:k(["w-28",[j.value?"":"invisible"]]),color:"primary","exact-color":"",onClick:V},null,8,["class"])]),e("div",re,[n(h,{modelValue:l.value.description,"onUpdate:modelValue":s[1]||(s[1]=t=>l.value.description=t),label:"Trabajo realizado",placeholder:"Digite información sobre el trabajo realizado"},null,8,["modelValue"])]),e("div",ie,[n(h,{modelValue:l.value.price,"onUpdate:modelValue":s[2]||(s[2]=t=>l.value.price=t),currency:"",label:"Precio del trabajo",placeholder:"Información del precio del trabajo",select:""},null,8,["modelValue"])]),n($,{"current-register":l.value,"onUpdate:currentRegister":s[3]||(s[3]=t=>l.value=t)},null,8,["current-register"])])])):D("",!0)]),_:1}))}});export{he as default};
