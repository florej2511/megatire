import{s as d,_ as C}from"./Header.vue_vue_type_script_setup_true_lang-a50dfd78.js";import{a as p,f as w,_ as f,d as B}from"./axios-4e48d306.js";import{a as b,d as $,b as u,o as E,k as _,l as v,i,e,c as x,m as S,F as j,t as a,g as r,n as z}from"./index-9c9b437d.js";class m{constructor(){const s=b();p.defaults.headers.Authorization=`Bearer ${s.api_token}`}async listMessages(s){return await p.get("messages",{params:s})}async validateMessage(s){return await p.post(`messages/${s}`)}}const A={class:"w-full h-auto pt-5"},F=["onClick"],I={class:"tablet:w-1/12 w-0 flex flex-col tablet:px-2 text-center overflow-hidden"},N={class:"tablet:w-2/12 phone:w-1/3 flex flex-col px-2 border-x text-center overflow-hidden"},R={class:"tablet:w-3/12 phone:w-2/3 flex flex-col px-2 border-x text-center overflow-hidden"},T={class:"tablet:w-6/12 phone:w-0 flex tablet:px-3 overflow-hidden"},V={class:"flex flex-wrap items-center"},D=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Recibido: ",-1),G={class:"tablet:w-2/3 phone:w-full text-sm italic"},L={class:"flex flex-wrap items-center"},O=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Envíado por: ",-1),P={class:"tablet:w-2/3 phone:w-full text-sm italic cursor-pointer"},W={class:"flex flex-wrap items-center"},q=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Nombre: ",-1),H={class:"tablet:w-2/3 phone:w-full text-sm italic cursor-pointer"},J={class:"flex flex-wrap items-center"},K=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Teléfono: ",-1),Q={class:"tablet:w-2/3 phone:w-full text-sm italic cursor-pointer"},U={class:"flex flex-wrap items-center"},X=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Revisado: ",-1),Y={class:"tablet:w-2/3 phone:w-full text-sm italic"},Z=e("div",{class:"py-3 text-center border-y mt-2"},[e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Contenido del mensaje: ")],-1),ee={class:"py-4"},oe=$({__name:"MessagesView",setup(g){const s=u([]),o=u({}),y=b(),h=()=>{let t=0;s.value.forEach(n=>{n.reviewed_at||t++}),y.messages=t},k=async()=>{const n=await new m().listMessages({});s.value=n.data,h()};E(async()=>{d("title","Mensajes recibidos"),k()});const M=async t=>{if(!t.reviewed_at){const l=await new m().validateMessage(t.id);s.value=s.value.map(c=>(c.id==t.id&&(c={...t,...l.data}),c)),h()}o.value=t,d("helperWindow","ok"),d("helperTitle","Información")};return(t,n)=>(i(),_(C,null,{main:v(()=>[e("div",A,[(i(!0),x(j,null,S(s.value,(l,c)=>(i(),x("div",{class:"py-1",key:c},[e("div",{class:z(["w-full h-10 border overflow-hidden flex items-center px-2 rounded-lg cursor-pointer hover:bg-gray-200 hover:bg-opacity-50 duration-200 whitespace-nowrap",[l.reviewed_by?"":"border-primary"]]),onClick:se=>M(l)},[e("div",I,[l.reviewed_by?(i(),_(r(f),{key:0,icon:"mail"})):(i(),_(r(f),{key:1,icon:"mark_email_unread",class:"text-primary"}))]),e("div",N,a(r(B)(l.date)),1),e("div",R,a(l.email),1),e("div",T,a(l.content),1)],10,F)]))),128))])]),helper:v(()=>[e("div",V,[D,e("span",G,a(r(w)(o.value.date)),1)]),e("div",L,[O,e("span",P,a(o.value.email),1)]),e("div",W,[q,e("span",H,a(o.value.fullname),1)]),e("div",J,[K,e("span",Q,a(o.value.cellphone),1)]),e("div",U,[X,e("span",Y,a(r(w)(o.value.reviewed_at)),1)]),Z,e("div",ee,a(o.value.content),1)]),_:1}))}});export{oe as default};
