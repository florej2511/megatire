import{s as r,_ as N}from"./Header.vue_vue_type_script_setup_true_lang-a50dfd78.js";import{I as $,_ as w}from"./Button.vue_vue_type_script_setup_true_lang-a65fa9bc.js";import"./axios-4e48d306.js";import{V as x,_ as j}from"./UserCreation.vue_vue_type_script_setup_true_lang-c1474c2b.js";import{d as B,b as o,o as F,j as I,k as T,l as m,i as d,e,f as p,c as f,m as S,F as U,t as s,n as b,h as A,p as E}from"./index-9c9b437d.js";const G={class:"flex w-full flex-wrap"},O={class:"w-full flex pt-5 flex-wrap"},W={class:"tablet:flex-1 phone:w-full tablet:pr-4 py-2"},z={class:"tablet:w-fit phone:w-full flex justify-end py-2"},D={class:"w-full h-auto pt-5"},H=["onClick"],L={class:"tablet:w-1/6 phone:w-1/3 flex flex-col px-2 border-x text-center overflow-hidden"},M={class:"tablet:w-3/6 phone:w-2/3 flex flex-col px-2 border-x text-center overflow-hidden"},P={class:"tablet:w-2/6 phone:w-0 flex tablet:px-3 overflow-hidden"},q={key:0},J={class:"flex flex-wrap items-center"},K=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Nombre completo: ",-1),Q={class:"tablet:w-2/3 phone:w-full text-sm italic"},R={class:"flex flex-wrap items-center"},X=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Identificación: ",-1),Y={class:"tablet:w-2/3 phone:w-full text-sm italic"},Z={class:"flex flex-wrap items-center"},ee=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Correo: ",-1),te={class:"tablet:w-2/3 phone:w-full text-sm italic"},le={class:"flex flex-wrap items-center"},se=e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Celular: ",-1),ae={class:"tablet:w-2/3 phone:w-full text-sm italic"},ne=e("div",{class:"py-3 text-center border-y mt-2"},[e("span",{class:"tablet:w-1/3 phone:w-full text-lg"}," Vehículos: ")],-1),oe=e("div",{class:"py-4"},s(""),-1),ie={key:1},ce={class:"flex flex-wrap items-center"},re={class:"w-full flex justify-end"},we=B({__name:"ClientsView",setup(de){const _=o(""),i=o([]),c=o(),a=o({}),u=o({}),h=o(!1);F(()=>{r("title","Clientes"),v()});const v=async()=>{c.value&&c.value.abort(),c.value=new AbortController;const l=await new x().listClients({"fullname,cc_nit":`%%${_.value}`},c.value.signal);c.value=void 0,i.value=l.data},y=async()=>{const l=await new x().saveClient(u.value);if(l.status==200){let n=!1;i.value=i.value.map(t=>t.id==l.data.id?(n=!0,l.data):t),n||i.value.unshift(l.data)}},C=async()=>{h.value=!1,await E(),h.value=!0,a.value={},u.value={},r("helperWindow","ok"),r("helperTitle","Nuevo cliente")},k=l=>{a.value=l,r("helperWindow","ok"),r("helperTitle","Perfil de cliente")},g=I(()=>!0);return(l,n)=>(d(),T(N,null,{main:m(()=>[e("div",G,[e("div",O,[e("div",W,[p($,{modelValue:_.value,"onUpdate:modelValue":[n[0]||(n[0]=t=>_.value=t),v],label:"Filtrar clientes",placeholder:"Filtrar clientes por nombre o identificación"},null,8,["modelValue"])]),e("div",z,[p(w,{content:"Añadir/Editar",color:"primary","exact-color":"",class:"tablet:w-40 phone:w-full",onClick:C})])]),e("div",D,[(d(!0),f(U,null,S(i.value,(t,V)=>(d(),f("div",{class:"py-1",key:V},[e("div",{class:b(["w-full h-10 border overflow-hidden flex items-center px-2 rounded-lg cursor-pointer hover:bg-gray-200 hover:bg-opacity-50 duration-200 whitespace-nowrap",[t.reviewed_by?"":"border-primary"]]),onClick:ue=>k(t)},[e("div",L,s(t.cc_nit),1),e("div",M,s(t.fullname),1),e("div",P,s(t.cellphone),1)],10,H)]))),128))])])]),helper:m(()=>[Object.keys(a.value).length?(d(),f("div",q,[e("div",J,[K,e("span",Q,s(a.value.fullname),1)]),e("div",R,[X,e("span",Y,s(a.value.cc_nit),1)]),e("div",Z,[ee,e("span",te,s(a.value.email),1)]),e("div",le,[se,e("span",ae,s(a.value.cellphone),1)]),ne,oe])):h.value?(d(),f("div",ie,[e("div",ce,[e("div",re,[p(w,{content:"Guardar",class:b(["w-28",[g.value?"":"invisible"]]),color:"primary","exact-color":"",onClick:y},null,8,["class"])]),p(j,{"current-user":u.value,"onUpdate:currentUser":n[1]||(n[1]=t=>u.value=t)},null,8,["current-user"])])])):A("",!0)]),_:1}))}});export{we as default};
